# 一次性消息聊天原型

## 功能
- 自动分配用户ID，显示在页面顶部
- 输入对方ID互加好友（双方在线）
- 普通消息即时聊天
- 一次性消息需点击确认后揭示，支持TTL秒级过期；揭示或到期立即销毁

## 目录
- `server.js`：后端服务（Express + WebSocket）
- `public/`：前端页面与脚本

## 运行要求
- 需要安装 Node.js（建议 18+）

## 安装与启动
1. 安装 Node.js：访问 `https://nodejs.org/` 下载 Windows 安装包并安装，确保 `node` 与 `npm` 在系统 PATH
2. 在项目目录执行：
   - `npm install`
   - `npm start`
3. 打开浏览器访问：`http://localhost:3000/`

## 验证流程
- 打开两个浏览器窗口，分别作为两个用户
- 使用窗口A的用户ID，加窗口B的ID为好友，窗口B也会看到A加入好友
- 选择好友进行普通消息互发
- 勾选“发送一次性消息”，设置TTL（如20秒）并发送：
  - 接收方看到占位卡片，点击确认才显示正文
  - 揭示后立即显示“已销毁”；若未点击直到过期，显示“过期已销毁”

## 诊断
- 健康检查：访问 `http://localhost:3000/health` 返回 `{"ok": true}` 表示服务正常

## 后续计划
- 持久化好友与消息（数据库/Redis）
- 加密一次性消息内容（揭示前存密文）
- 更完善的离线与权限管理
